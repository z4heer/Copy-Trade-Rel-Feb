<div class="holdings content">
  <div *ngIf="error" class="error">{{ error }}</div>
  <div *ngIf="loading" class="loading">Loading...</div>
  <div class="filter-sort">
    <input type="text" placeholder="Filter by Symbol" [(ngModel)]="filterSymbol" (ngModelChange)="filterHoldings()" />
  </div>
  <table *ngIf="filteredHoldings.length">
    <thead>
      <tr>
        <th (click)="sortHoldings('Symbol')" [class.sorted-asc]="sortField === 'Symbol' && sortOrder === 'asc'" [class.sorted-desc]="sortField === 'Symbol' && sortOrder === 'desc'">Symbol</th>
        <th (click)="sortHoldings('Exchange')">Exchange</th>
        <th (click)="sortHoldings('BuyQuantity')">Quantity</th>
        <th (click)="sortHoldings('Ltp')">LTP</th>
        <th (click)="sortHoldings('TotalVal')">Total Value</th>
        <th (click)="sortHoldings('ChangePcToday')">Change % Today</th>
        <th (click)="sortHoldings('ProductCode')">Product Code</th>
        <th (click)="sortHoldings('StreamingSymbol')">Streaming Symbol</th>
        <th (click)="sortHoldings('userid')">User ID</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let holding of filteredHoldings">
        <td>{{ holding.Symbol }}</td>
        <td>{{ holding.Exchange }}</td>
        <td>{{ holding.BuyQuantity }}</td>
        <td>{{ holding.Ltp }}</td>
        <td>{{ holding.TotalVal }}</td>
        <td>{{ holding.ChangePcToday }}</td>
        <td>{{ holding.ProductCode }}</td>
        <td>{{ holding.StreamingSymbol }}</td>
        <td>{{ holding.userid }}</td>
        <td>
          <button (click)="call_squareoff(holding)">Square Off</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>