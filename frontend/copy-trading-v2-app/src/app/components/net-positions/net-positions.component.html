<div class="net-positions content">
  <div *ngIf="error" class="error">{{ error }}</div>
  <div *ngIf="loading" class="loading">Loading...</div>
  <div class="filter-sort">
    <input type="text" placeholder="Filter by Symbol" [(ngModel)]="filterSymbol" (ngModelChange)="filterPositions()" />
  </div>
  <table *ngIf="filteredPositions.length">
    <thead>
      <tr>
        <th (click)="sortPositions('userid')" [class.sorted-asc]="sortField === 'userid' && sortOrder === 'asc'" [class.sorted-desc]="sortField === 'userid' && sortOrder === 'desc'">User ID</th>
        <th (click)="sortPositions('Symbol')" [class.sorted-asc]="sortField === 'Symbol' && sortOrder === 'asc'" [class.sorted-desc]="sortField === 'Symbol' && sortOrder === 'desc'">Symbol</th>
        <th>Trading Symbol</th>
        <th>Exchange</th>
        <th>Buy Quantity</th>
        <th>Buy Price</th>
        <th>Sell Quantity</th>
        <th>Sell Price</th>
        <th>Product Code</th>
        <th>Streaming Symbol</th>
        <th>Square off Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let position of filteredPositions">
        <td>{{ position.userid }}</td>
        <td>{{ position.Symbol }}</td>
        <td>{{ position.TradingSymbol }}</td>
        <td>{{ position.Exchange }}</td>
        <td>{{ position.BuyQuantity }}</td>
        <td>{{ position.BuyPrice }}</td>
        <td>{{ position.SellQuantity }}</td>
        <td>{{ position.SellPrice }}</td>
        <td>{{ position.ProductCode }}</td>
        <td>{{ position.StreamingSymbol }}</td>
        <td>{{ position.squareOffSts }}</td>
        <td>
          <button *ngIf="position.squareOffSts === 'true'" (click)="call_squareoff(position)">Position Square Off</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>